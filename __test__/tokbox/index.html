<html>
<body>


<script src="https://observertc.github.io/webextrapp/dist/v0.3.5/observer.min.js"></script>
<script>
    let observerWsEndPoint = ObserverRTC.ParserUtil.parseWsServerUrl(
        "ws://localhost:8088/",           // observerURL
        "b8bf0467-d7a9-4caa-93c9-8cd6e0dd7731", // Add a unique ServiceUUID here
        "opentok-demo",                         // MediaUnitID
        "v20200114"                             // StatsVersion
    );
</script>
<script src="https://observertc.github.io/integrations/dist/v0.0.2/tokbox.integration.min.js"></script>
<script src="https://static.opentok.com/v2/js/opentok.js" charset="utf-8"></script>

<script charset="utf-8">
    window.onload = () => {
        // https://tokbox.com/developer/quickstart/
        var apiKey = '45828062';
        var sessionId = '2_MX40NTgyODA2Mn5-MTYwODMyNTIzMTI4NX52WUJtWlIySHFWdDZ3MmNJTEF5TS9JRm5-UH4';
        var token = 'T1==cGFydG5lcl9pZD00NTgyODA2MiZzaWc9NjdmZDA4Zjc0ZDNmNDE3NTc0ZDJiZTdhNGY0MTcyYTBkYjE4ZGM4ZDpzZXNzaW9uX2lkPTJfTVg0ME5UZ3lPREEyTW41LU1UWXdPRE15TlRJek1USTROWDUyV1VKdFdsSXlTSEZXZERaM01tTkpURUY1VFM5SlJtNS1VSDQmY3JlYXRlX3RpbWU9MTYwODMyNjUwMyZub25jZT0wLjM4NTE3OTA0MTEwNDg1MTcmcm9sZT1wdWJsaXNoZXImZXhwaXJlX3RpbWU9MTYwODQxMjkwMw==';
        // connect to session
        const session = OT.initSession(apiKey, sessionId);
        const publisherId = `publisher-id-${Math.round(Math.random() * 1000)}`
        const publisherName = `pallab-${Math.round(Math.random() * 1000)}`
        // create publisher
        const publisher = OT.initPublisher(publisherId, {name: publisherName});
        session.connect(token, function (err) {
            // publish publisher
            session.publish(publisher);
        })


        // create subscriber
        session.on('streamCreated', function (event) {
            session.subscribe(event.stream);
        });
    }
</script>
<p>open another tab and they should connect each other</p>
</body>
<link href="https://fonts.googleapis.com/css?family=Muli" rel="stylesheet">
<style>
    body {
        font-family: Muli, Arial;
    }

    strong {
        color: #09c;
    }

    .OT_publisher {
        float: left;
        margin-right: 5px;
    }
</style>
</html>
